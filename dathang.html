<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="ƒê·∫∑t h√†ng t·∫°i Bean Cofy ‚Äì Giao t·∫≠n n∆°i ho·∫∑c nh·∫≠n t·∫°i qu√°n" />
  <title>ƒê·∫∑t h√†ng ‚Ä¢ Bean Cofy</title>
  <link rel="icon" href="/assets/img/logo.png" type="image/png" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <style>
    .order-hero{background:var(--surface);border-bottom:1px solid var(--border)}
    .order-wrap{display:grid;grid-template-columns:1.2fr .8fr;gap:1rem}
    .order-summary{position:sticky;top:80px;align-self:start}
    .sum-row{display:flex;justify-content:space-between;gap:.75rem}
    .sum-row + .sum-row{margin-top:.35rem}
    .sum-total{font-weight:800;font-size:1.15rem}
    .muted{color:var(--muted)}
    .hidden{display:none !important}
    @media (max-width: 980px){ .order-wrap{grid-template-columns:1fr} .order-summary{position:static} }
    .price-chip{display:inline-block;padding:.2rem .5rem;border:1px solid var(--border);border-radius:999px;font-size:.85rem;color:var(--muted)}
    .inline-help{font-size:.85rem;color:var(--muted)}
    .toppings{display:flex;gap:.75rem;flex-wrap:wrap}
  </style>
</head>
<body>
  <a class="skip-link" href="#main">B·ªè qua n·ªôi dung</a>

  <!--Topbar-->
  <div class="topbar" role="region" aria-label="Store info">
    <div class="container topbar-inner">
      <span>üìç 189 C√¥ Giang</span>
      <span>üìû 0867.594.183</span>
    </div>
  </div>

  <header class="site-header header-centered order-hero" role="banner">
    <div class="container">
      <nav class="site-nav centered" aria-label="Main">
        <button id="navToggle" class="nav-toggle" aria-expanded="false" aria-controls="navMenu">Menu ‚ò∞</button>

        <a class="brand-center" href="/index.html" aria-label="Bean Cofy Home">
          <img src="/assets/img/logo.png" width="140" height="48" alt="BEAN COFY logo" />
        </a>

        <ul class="left menu-root" id="navMenu">
          <li class="has-submenu">
            <a href="/menu.html#coffee" aria-haspopup="true" aria-expanded="false">C√† ph√™</a>
            <button class="submenu-toggle" aria-label="M·ªü danh m·ª•c C√† ph√™"></button>
            <ul class="submenu" aria-label="Danh m·ª•c C√† ph√™">
              <li><a href="/menu.html#espresso">Espresso</a></li>
              <li><a href="/menu.html#americano">Americano</a></li>
              <li><a href="/menu.html#latte">Latte</a></li>
              <li><a href="/menu.html#cappuccino">Cappuccino</a></li>
              <li><a href="/menu.html#coldbrew">Cold Brew</a></li>
            </ul>
          </li>

          <li class="has-submenu">
            <a href="/menu.html#tea" aria-haspopup="true" aria-expanded="false">Tr√†</a>
            <button class="submenu-toggle" aria-label="M·ªü danh m·ª•c Tr√†"></button>
            <ul class="submenu" aria-label="Danh m·ª•c Tr√†">
              <li><a href="/menu.html#sen-tuyet">Tr√† Sen Tuy·∫øt</a></li>
              <li><a href="/menu.html#sen-may">Tr√† Sen M√¢y</a></li>
              <li><a href="/menu.html#sen-vai">Tr√† Sen V·∫£i</a></li>
              <li><a href="/menu.html#dao-cam-sa">Tr√† ƒê√†o Cam S·∫£</a></li>
              <li><a href="/menu.html#tra-sua">Tr√† S·ªØa</a></li>
            </ul>
          </li>

          <li><a href="/about.html">V·ªÅ ch√∫ng t√¥i</a></li>
        </ul>

        <ul class="right menu-root">
          <li><a href="/tuyendung.html">Tuy·ªÉn d·ª•ng</a></li>
          <li><a class="btn small" href="/dathang.html" aria-current="page">ƒê·∫∑t h√†ng</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main" class="site-main">
    <section class="container" aria-labelledby="order-title" style="padding-top:1rem">
      <h1 id="order-title">ƒê·∫∑t h√†ng</h1>
      <p class="inline-help">Ch·ªçn m√≥n, ƒëi·ªÅn th√¥ng tin v√† th·ªùi gian nh·∫≠n m√≥n. T·ªïng ti·ªÅn s·∫Ω c·∫≠p nh·∫≠t t·ª± ƒë·ªông.</p>

      <div class="order-wrap">
        <!--Form-->
        <form id="orderForm" class="card" novalidate>
          <!--san pham-->
          <fieldset>
            <legend>M√≥n & T√πy ch·ªçn</legend>

            <div class="full">
            <label for="item">Ch·ªçn ƒë·ªì u·ªëng *</label>
            <select id="item" name="item" required>
              <option value="" disabled selected>‚Äî Ch·ªçn m√≥n ‚Äî</option>

              <optgroup label="C√† ph√™">
                <option value="espresso"   data-price="30000">Espresso ‚Äî 30.000</option>
                <option value="americano"  data-price="35000">Americano ‚Äî 35.000</option>
                <option value="latte"      data-price="45000">Latte ‚Äî 45.000</option>
                <option value="cappuccino" data-price="45000">Cappuccino ‚Äî 45.000</option>
                <option value="coldbrew"   data-price="47000">Cold Brew ‚Äî 47.000</option>
              </optgroup>

              <optgroup label="Tr√†">
                <option value="sen-tuyet"  data-price="79000">Tr√† Sen Tuy·∫øt ‚Äî 79.000</option>
                <option value="sen-may"    data-price="65000">Tr√† Sen M√¢y ‚Äî 65.000</option>
                <option value="sen-vai"    data-price="65000">Tr√† Sen V·∫£i ‚Äî 65.000</option>
                <option value="dao-cam-sa" data-price="65000">Tr√† ƒê√†o Cam S·∫£ ‚Äî 65.000</option>
                <option value="tra-sua"    data-price="55000">Tr√† S·ªØa ‚Äî 55.000</option>
              </optgroup>
            </select>
            <div class="hint">Gi√° c∆° b·∫£n hi·ªÉn th·ªã ·ªü t·ª´ng m√≥n.</div>
          </div>
              <div>
                <label>S·ªë l∆∞·ª£ng *</label>
                <input id="qty" name="qty" type="number" min="1" max="20" step="1" value="1" required />
              </div>

              <div>
                <label>K√≠ch c·ª°</label>
                <div class="choices">
                  <label><input type="radio" name="size" value="S" checked> S</label>
                  <label><input type="radio" name="size" value="M"> M (+5.000)</label>
                  <label><input type="radio" name="size" value="L"> L (+10.000)</label>
                </div>
              </div>

              <div>
                <label for="ice">ƒê√°: <span id="iceOut" class="price-chip">50%</span></label>
                <input id="ice" name="ice" type="range" min="0" max="100" step="10" value="50"
                       oninput="iceOut.textContent=this.value+'%'" />
              </div>

              <div>
                <label for="sweet">ƒê·ªô ng·ªçt: <span id="sweetOut" class="price-chip">50%</span></label>
                <input id="sweet" name="sweet" type="range" min="0" max="100" step="10" value="50"
                       oninput="sweetOut.textContent=this.value+'%'" />
              </div>

              <div class="full">
                <label>Topping</label>
                <div class="toppings">
                  <label><input type="checkbox" name="top" value="tranchau" data-price="5000"> Tr√¢n ch√¢u (+5.000)</label>
                  <label><input type="checkbox" name="top" value="thach" data-price="5000"> Th·∫°ch (+5.000)</label>
                  <label><input type="checkbox" name="top" value="kemcheese" data-price="10000"> Kem cheese (+10.000)</label>
                </div>
              </div>
            </div>
          </fieldset>

          
          <fieldset>
            <legend>Nh·∫≠n m√≥n</legend>
            <div class="choices">
              <label><input type="radio" name="method" value="pickup" checked> Nh·∫≠n t·∫°i qu√°n</label>
              <label><input type="radio" name="method" value="delivery"> Giao t·∫≠n n∆°i</label>
            </div>

            <div id="deliveryFields" class="form-grid hidden" aria-hidden="true">
              <div class="full">
                <label for="address">ƒê·ªãa ch·ªâ giao *</label>
                <input id="address" name="address" type="text" placeholder="S·ªë nh√†, ƒë∆∞·ªùng, ph∆∞·ªùng, qu·∫≠n" />
              </div>
              <div>
                <label for="ward">Ph∆∞·ªùng/X√£</label>
                <input id="ward" name="ward" type="text" />
              </div>
              <div>
                <label for="district">Qu·∫≠n/Huy·ªán</label>
                <input id="district" name="district" type="text" />
              </div>
              <div>
                <label for="note-ship">Ghi ch√∫ giao h√†ng</label>
                <input id="note-ship" name="noteShip" type="text" placeholder="VD: g·ªçi tr∆∞·ªõc khi ƒë·∫øn" />
              </div>
            </div>
          </fieldset>

          
          <fieldset>
            <legend>Th·ªùi gian & Thanh to√°n</legend>
            <div class="form-grid">
              <div>
                <label for="date">Ng√†y nh·∫≠n *</label>
                <input id="date" name="date" type="date" required />
              </div>
              <div>
                <label for="time">Gi·ªù nh·∫≠n *</label>
                <input id="time" name="time" type="time" required />
              </div>
              <div>
                <label for="pay">Thanh to√°n</label>
                <select id="pay" name="pay">
                  <option value="cash">Ti·ªÅn m·∫∑t</option>
                  <option value="card">Th·∫ª</option>
                  <option value="ewallet">V√≠ ƒëi·ªán t·ª≠</option>
                </select>
              </div>
              <div>
                <label for="coupon">M√£ gi·∫£m gi√°</label>
                <input id="coupon" name="coupon" list="coupon-list" placeholder="Nh·∫≠p m√£ (n·∫øu c√≥)" />
                <datalist id="coupon-list">
                  <option value="SEN10">Gi·∫£m 10%</option>
                  <option value="FREESHIP">Mi·ªÖn ph√≠ ship n·ªôi qu·∫≠n</option>
                </datalist>
              </div>
            </div>
          </fieldset>

          <!--Kh√°ch h√†ng-->
          <fieldset>
            <legend>Th√¥ng tin kh√°ch h√†ng</legend>
            <div class="form-grid">
              <div>
                <label for="fullname">H·ªç v√† t√™n *</label>
                <input id="fullname" name="fullname" type="text" required placeholder="Nguy·ªÖn VƒÉn A" />
              </div>
              <div>
                <label for="email">Email *</label>
                <input id="email" name="email" type="email" required placeholder="ban@vi.du" />
              </div>
              <div>
                <label for="phone">ƒêi·ªán tho·∫°i *</label>
                <input id="phone" name="phone" type="tel" required placeholder="09xxxxxxxx"
                       pattern="^(0|\\+84)[0-9]{9,10}$" />
                <div class="hint">ƒê·ªãnh d·∫°ng: 0xxxxxxxxx ho·∫∑c +84xxxxxxxx</div>
              </div>
              <div class="full">
                <label for="note">Ghi ch√∫</label>
                <textarea id="note" name="note" rows="3" placeholder="√çt ƒë√°, √≠t ng·ªçt, kh√¥ng topping..."></textarea>
              </div>
            </div>
            <input type="hidden" name="source" value="order-page" />
          </fieldset>

          <div class="form-actions">
            <button type="submit" class="btn">G·ª≠i ƒë∆°n</button>
            <button type="reset" class="btn secondary">L√†m l·∫°i</button>
            <span id="orderStatus" class="hint" role="status" aria-live="polite"></span>
          </div>
        </form>

        <!--form tom tat don-->
        <aside class="order-summary card" aria-label="T√≥m t·∫Øt ƒë∆°n h√†ng">
          <h2>ƒê∆°n c·ªßa b·∫°n</h2>
          <div class="sum-row"><span>M√≥n</span><strong id="sumItem">‚Äî</strong></div>
          <div class="sum-row"><span>K√≠ch c·ª°</span><span id="sumSize">S</span></div>
          <div class="sum-row"><span>Topping</span><span id="sumTop">Kh√¥ng</span></div>
          <div class="sum-row"><span>S·ªë l∆∞·ª£ng</span><span id="sumQty">1</span></div>
          <div class="sum-row"><span>T·∫°m t√≠nh</span><span id="sumSub">0 ƒë</span></div>
          <div class="sum-row"><span>∆Øu ƒë√£i</span><span id="sumDisc" class="muted">0 ƒë</span></div>
          <div class="sum-row sum-total"><span>T·ªïng c·ªông</span><span id="sumTotal">0 ƒë</span></div>
          <p class="hint">* Gi√° ƒë√£ bao g·ªìm VAT. Ph√≠ giao h√†ng (n·∫øu c√≥) s·∫Ω th√¥ng b√°o sau.</p>
        </aside>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2025 Bean Cofy ¬∑ <a href="/policy.html">Policies</a></p>
    </div>
  </footer>

  <script src="/assets/js/main.js" defer></script>
  <script>
    

    (function(){
      const form = document.getElementById('orderForm');
      const status = document.getElementById('orderStatus');

      const itemSel = document.getElementById('item');
      const qty = document.getElementById('qty');
      const toppings = Array.from(document.querySelectorAll('input[name="top"]'));
      const sizeRadios = Array.from(document.querySelectorAll('input[name="size"]'));
      const methodRadios = Array.from(document.querySelectorAll('input[name="method"]'));
      const deliveryFields = document.getElementById('deliveryFields');
      const address = document.getElementById('address');
      const coupon = document.getElementById('coupon');

      // summary fields
      const sumItem = document.getElementById('sumItem');
      const sumSize = document.getElementById('sumSize');
      const sumTop  = document.getElementById('sumTop');
      const sumQty  = document.getElementById('sumQty');
      const sumSub  = document.getElementById('sumSub');
      const sumDisc = document.getElementById('sumDisc');
      const sumTotal= document.getElementById('sumTotal');

      const fmt = (v) => v.toLocaleString('vi-VN') + ' ƒë';

      function getBasePrice(){
        const opt = itemSel.options[itemSel.selectedIndex];
        return Number(opt.dataset.price || 0);
      }

      function getSizeFee(){
        const s = sizeRadios.find(r => r.checked)?.value || 'S';
        if (s === 'M') return 5000;
        if (s === 'L') return 10000;
        return 0;
      }

      function getToppingFee(){
        return toppings.filter(t => t.checked).reduce((a,t)=> a + Number(t.dataset.price||0), 0);
      }

      function getDiscount(subtotal){
        const code = (coupon.value || '').trim().toUpperCase();
        if (!code) return 0;
        if (code === 'SEN10') return Math.round(subtotal * 0.10);
        if (code === 'FREESHIP') return 0; // ship t√≠nh ri√™ng, demo kh√¥ng c·ªông ph√≠ ship
        return 0;
      }

      function updateSummary(){
        const itemName = itemSel.options[itemSel.selectedIndex].textContent.split(' ‚Äî ')[0];
        const size = sizeRadios.find(r => r.checked)?.value || 'S';
        const qtyVal = Math.max(1, Number(qty.value || 1));

        const base = getBasePrice();
        const sizeFee = getSizeFee();
        const topFee = getToppingFee();

        const priceOne = base + sizeFee + topFee;
        const subtotal = priceOne * qtyVal;
        const discount = getDiscount(subtotal);
        const total = Math.max(0, subtotal - discount);

        // summary text
        sumItem.textContent = itemName;
        sumSize.textContent = size;
        const tops = toppings.filter(t => t.checked).map(t => {
          const label = t.parentElement.textContent.trim();
          return label.replace(/\s*\(\+.*\)\s*/,'');
        });
        sumTop.textContent = tops.length ? tops.join(', ') : 'Kh√¥ng';
        sumQty.textContent = String(qtyVal);
        sumSub.textContent = fmt(subtotal);
        sumDisc.textContent = discount ? ('- ' + fmt(discount)) : '0 ƒë';
        sumTotal.textContent = fmt(total);
      }

      // nh·∫≠n m√≥n: ƒë·ªãa ch·ªâ
      function toggleDelivery(){
        const isDelivery = methodRadios.find(r=>r.checked)?.value === 'delivery';
        deliveryFields.classList.toggle('hidden', !isDelivery);
        deliveryFields.setAttribute('aria-hidden', String(!isDelivery));
        address.required = isDelivery;
      }

      // events
      [itemSel, qty, coupon].forEach(el => el.addentListener ? el.addentListener('input',updateSummary) : el.addEventListener('input',updateSummary));
      toppings.forEach(t => t.addEventListener('change', updateSummary));
      sizeRadios.forEach(r => r.addEventListener('change', updateSummary));
      methodRadios.forEach(r => r.addEventListener('change', toggleDelivery));

      // submit
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        if(!form.checkValidity()){
          status.textContent = 'Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin b·∫Øt bu·ªôc v√† ƒë·ªãnh d·∫°ng.';
          status.style.color = 'tomato';
          form.reportValidity();
          return;
        }
        status.textContent = 'C·∫£m ∆°n b·∫°n! ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n.';
        status.style.color = 'green';
        form.reset();
        toggleDelivery();
        updateSummary();
      });

      // reset
      form.addEventListener('reset', ()=>{
        setTimeout(()=>{ // ƒë·ª£i reset xong
          coupon.value = '';
          toggleDelivery();
          updateSummary();
          status.textContent = '';
        },0);
      });

      // init
      toggleDelivery();
      updateSummary();
    })();
  </script>
</body>
</html>
